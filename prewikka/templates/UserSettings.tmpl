#extends prewikka.templates.ClassicLayout

#block main_content
<div id="fieldset_page">

<form action="?" method="post">
<input type="hidden" name="view" value="user_settings_modify"/>
<input type="hidden" name="login" value="$user.login"/>

<fieldset id="fieldset_heading">
  <legend>Account informations</legend>

  <table>
    <tr>
      <th>Login:</th>
      <td style="text-align: right;">$user.login</td>
    </tr>
  </table>

  <table>
     <tr class="nodash">  
       <th>Permissions:</th>  
    </tr>
    <tr>
      <td>
        <table>
          #set $row_classes = ("table_row_even", "table_row_odd")
          #set $cnt = 0
          #for $perm, $value in $user.permissions
          <tr class="$row_classes[$cnt%2]">
            <td style="text-align: left;">$perm</td>
            <td>
              #if $value
                #set $checked = "checked=\"checked\""
              #else
                #set $checked = ""
              #end if
              #if $can_manage_user
                #set $disabled = ""
              #else
                #set $disabled = "disabled=\"disabled\""
              #end if
              <input type="checkbox" name="$perm" $checked $disabled/>
            </td>
          </tr>
          #set $cnt += 1
        #end for
      </table>
    </td>
  </tr>
  </table>
</fieldset>
<br/>

#if $can_change_password
<fieldset>
  <legend>Change password</legend>
  <table>
    #if $ask_current_password
    <tr>
      <th>Current password:</th>
      <td><input type="password" name="password_current"/></td>
    </tr>
    #end if
    <tr>
      <th>New password:</th>
      <td><input type="password" name="password_new"/></td>
    </tr>
    <tr>
      <th>Confirm new password:</th>
      <td><input type="password" name="password_new_confirmation"/></td>
    </tr>
  </table>
</fieldset>
<br/>
#end if

<input type="submit" value="submit changes"/>

</form>
</div>
#end block main_content
